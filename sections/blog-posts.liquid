<script src="{{ 'blog-post.js' | asset_url }}" defer="defer"></script>
{{ 'section-blog-post.css' | asset_url | stylesheet_tag }}
{{ 'component-article-card.css' | asset_url | stylesheet_tag }}
{% liquid
  assign sst = section.settings
  assign container = sst.container
  assign column_gap = sst.column_gap

  assign blog = sst.blog
  assign show_heading_header = sst.show_heading_header
  assign heading = sst.heading
  assign desc = sst.description
%}
{%- capture style -%}
    --section-padding-top: {{ sst.padding_top }}px;
    --section-padding-bottom: {{ sst.padding_bottom }}px;
    --tp-gap-x:{{ column_gap }}px;
{%- endcapture -%}

<div class="tp-blog-posts color-{{ sst.color_scheme }} gradient section-py {% if sst.reset_spacing == false %}section-mb{% endif %}" style="{{ style | strip | strip_newlines }}">
  <div class="{{ container }} section-full">
    {%- if show_heading_header -%}
      {%- if heading != blank -%}
        <div class="tp-section-header mb-30 md:mb-40">
          <div class="flex items-center justify-between flex-wrap mb-20 ">
            {%- if heading != blank -%}
              <h2 class="tp-section-heading mb-0 {{ sst.text_alignment }}">
                {{ heading }}
              </h2>
            {%- endif -%}
            <div class="tp-section-btn flex items-center gap-20">
              {% if sst.show_button %}
                <a href="{{ blog.url | default: '#' }}" class="flex tp-btn tp-btn__underline n-hvr items-center gap-12">
                  {{ sst.text_btn }}
                </a>
              {% endif %}

              {% if sst.show_arrow %}
                <div class="flex items-center gap-10">
                  <div class="swiper-navigation shadow swiper-prev-blog-post swiper-button-prev">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="21"
                      viewBox="0 0 20 21"
                      fill="none">
                      <path d="M17.5 9.66895H4.15625L9.46875 4.2627C9.75 3.98145 9.75 3.54395 9.46875 3.2627C9.1875 2.98145 8.75 2.98145 8.46875 3.2627L2 9.8252C1.71875 10.1064 1.71875 10.5439 2 10.8252L8.46875 17.3877C8.59375 17.5127 8.78125 17.6064 8.96875 17.6064C9.15625 17.6064 9.3125 17.5439 9.46875 17.4189C9.75 17.1377 9.75 16.7002 9.46875 16.4189L4.1875 11.0752H17.5C17.875 11.0752 18.1875 10.7627 18.1875 10.3877C18.1875 9.98144 17.875 9.66895 17.5 9.66895Z" fill="#A3AEB9" />
                    </svg>
                  </div>
                  <div class="swiper-navigation shadow swiper-next-blog-post swiper-button-next">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="21"
                      viewBox="0 0 20 21"
                      fill="none">
                      <path d="M18 9.85645L11.5312 3.29395C11.25 3.0127 10.8125 3.0127 10.5312 3.29395C10.25 3.5752 10.25 4.0127 10.5312 4.29395L15.7812 9.6377H2.5C2.125 9.6377 1.8125 9.95019 1.8125 10.3252C1.8125 10.7002 2.125 11.0439 2.5 11.0439H15.8437L10.5312 16.4502C10.25 16.7314 10.25 17.1689 10.5312 17.4502C10.6562 17.5752 10.8437 17.6377 11.0312 17.6377C11.2187 17.6377 11.4062 17.5752 11.5312 17.4189L18 10.8564C18.2812 10.5752 18.2812 10.1377 18 9.85645Z" fill="#A3AEB9" />
                    </svg>
                  </div>
                </div>
              {% endif %}

            </div>

          </div>
        </div>
        {% if desc %}
          <div class="tp-section-desc mb-30 md:mb-40 {{ sst.text_alignment }}">
            {{ desc }}
          </div>
        {% endif %}
      {%- endif -%}
    {%- endif -%}
    <div class="">
      <div
        class="tp-blog-posts__content swiper hover__show-nav"
        data-autoplay="{{ sst.autoplay }}"
        data-loop="{{ sst.loop }}"
        data-mobile="2"
        data-tablet="3"
        data-desktop="{{ sst.post_item_desktop }}"
        data-space-between="{{ settings.spacing_grid_horizontal }}">
        <div class="swiper-wrapper">
          {%- for article in blog.articles limit: sst.num_post_show -%}
            <div class="swiper-slide">
              {%- render 'article-card'
                , article: article -%}
            </div>
          {% else %}
            {%- for i in (1..sst.num_post_show) -%}
              <div class="swiper-slide">
                {% liquid
                  assign diff = 4 | minus: 1
                  assign randomNumber = 'now' | date: '%N' | modulo: diff | plus: 1
                  assign placeholder_image = 'product-apparel-' | append: randomNumber
                  render 'article-card', placeholder_image: placeholder_image
                %}
              </div>
            {%- endfor -%}
          {%- endfor -%}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Blog posts",
    "tag": "section",
    "disabled_on": {
      "groups": ["*"]
    },
    "settings": [
      {
        "type": "header",
        "content": "Section header"
      },
      {
        "type": "checkbox",
        "id": "show_heading_header",
        "label": "Show \"Section header\"",
        "default": false
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Title"
      },
      {
        "type": "richtext",
        "id": "description",
        "label": "Description",
        "default": "<p></p>"
      }, {
        "type": "checkbox",
        "id": "show_button",
        "label": "Show button",
        "default": true
      }, {
        "type": "text",
        "id": "text_btn",
        "label": "Text button",
        "default": "See more"
      }, {
        "type": "paragraph",
        "content": "----------------------------------------"
      }, {
        "type": "header",
        "content": "General"
      }, {
        "type": "select",
        "id": "container",
        "label": "Layout",
        "default": "container",
        "options": [
          {
            "value": "container",
            "label": "Default"
          }, {
            "value": "container-fluid",
            "label": "Fluid container"
          }, {
            "value": "full-width",
            "label": "Full width"
          }
        ]
      }, {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "t:sections.all.colors.label",
        "default": "background-1"
      }, {
        "type": "header",
        "content": "Blog settings"
      }, {
        "type": "blog",
        "id": "blog",
        "label": "Blog category"
      }, {
        "type": "range",
        "min": 2,
        "max": 20,
        "default": 12,
        "step": 1,
        "id": "num_post_show",
        "label": "Posts to show"
      }, {
        "type": "range",
        "min": 1,
        "max": 6,
        "step": 1,
        "id": "post_item_desktop",
        "default": 3,
        "label": "Post per row (Desktop)"
      }, {
        "type": "range",
        "min": 0,
        "max": 50,
        "step": 5,
        "default": 30,
        "label": "Column gap",
        "id": "column_gap"
      }, {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Autoplay",
        "default": false
      }, {
        "type": "checkbox",
        "id": "loop",
        "label": "Loop",
        "default": false
      }, {
        "type": "checkbox",
        "id": "show_arrow",
        "label": "Show arrows",
        "default": true
      }, {
        "type": "checkbox",
        "id": "reset_spacing",
        "label": "Remove default space between sections",
        "default": false
      }, {
        "type": "paragraph",
        "content": "----------------------------------------"
      }, {
        "type": "header",
        "content": "Section padding"
      }, {
        "type": "range",
        "id": "padding_top",
        "label": "Padding top",
        "default": 0,
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px"
      }, {
        "type": "range",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "default": 0,
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px"
      }
    ],
    "blocks": [],
    "presets": [
      {
        "name": "Blog posts"
      }
    ]
  }
{% endschema %}