{{ 'section-blog-post.css' | asset_url | stylesheet_tag }}
{% liquid
  assign gst = settings
  assign sst = section.settings
%}
{%- capture style -%}
    --section-padding-top: {{ sst.padding_top }}px; --section-padding-bottom: {{ sst.padding_bottom }}px;
{%- endcapture -%}
<article
  class="article-template section-py"
  itemscope
  itemtype="http://schema.org/BlogPosting"
  style="{{ style | strip | strip_newlines }}">
  <div class="container">
    <div class="flex flex-col-reverse {% if sst.sid_pos == "left" %}md:flex-row{% else %}md:flex-row-reverse{% endif %}">
      <div class="article__left md:w-1/4 w-full">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {% when 'categories' %}
              {% if block.settings.menu.links != blank %}
                <div class="slider-categories mb-30">
                  <details
                    id="sidebar-categories"
                    class=""
                    data-index="1"
                    style=""
                    open="">
                    {% if block.settings.title != blank and block.settings.menu.links != blank %}
                      <summary
                        class="facets__summary mb-0 pb-24 caption-large focus-offset"
                        role="button"
                        aria-expanded="false"
                        aria-controls="sb-cat-drop">
                        <div class="summary-heading flex items-center justify-between">
                          <h3 class="mb-0 font-medium">
                            {{ block.settings.title }}
                          </h3>
                          <span class="icon-toggle relative"></span>
                        </div>
                      </summary>
                    {% endif %}
                    <div id="sb-cat-drop" class="parent-display content-animation facets__display-vertical">
                      <ul class="list-none">
                        {%- for link in block.settings.menu.links -%}
                          <li class="list-categories__item mb-6">
                            <a
                              href="{{ link.url }}"
                              class="categories__item"
                              title="{{ link.title }}">
                              {{ link.title }}
                            </a>
                          </li>
                        {%- endfor -%}
                      </ul>
                    </div>
                  </details>
                </div>
              {% endif %}
            {% when 'recent_post' %}
              <div class="recent-post mb-30">
                <details
                  id="sidebar-recent"
                  class=""
                  data-index="1"
                  style=""
                  open="">
                  <summary
                    class="facets__summary mb-0 pb-24 caption-large focus-offset"
                    role="button"
                    aria-expanded="false"
                    aria-controls="sb-rec-drop">
                    <div class="summary-heading flex items-center justify-between">
                      {% if block.settings.title != blank %}
                        <h3 class="mb-0 font-medium">{{ block.settings.title }}</h3>
                      {% endif %}
                      <span class="icon-toggle relative"></span>
                    </div>
                  </summary>
                  <div id="sb-rec-drop" class="parent-display content-animation facets__display-vertical">

                    {% if blog.articles.size > 0 %}
                      {%- paginate blog.articles by 5 -%}
                        {%- for article in blog.articles -%}
                          <div class="blog-item mb-10">
                            <a
                              class="font-medium color-heading"
                              href="{{ article.url }}"
                              title="{{ article.title }}">
                              {{ article.title | strip_html | truncatewords: 10 }}
                            </a>
                            <p class="mb-0 text-sm italic color-other">{{ article.published_at | date: " %b %d, %Y" }}</p>
                          </div>
                        {%- endfor -%}
                      {%- endpaginate -%}
                    {% endif %}

                  </div>
                </details>

              </div>
            {% when 'sidebar_tags' %}
              {% if blog.all_tags != blank and blog.all_tags.size > 0 %}
                <div class="tags mb-30">
                  <details
                    id="sidebar-tags"
                    class=""
                    data-index="1"
                    style=""
                    open="">
                    <summary
                      class="facets__summary mb-0 pb-24 caption-large focus-offset"
                      role="button"
                      aria-expanded="false"
                      aria-controls="sb-tag-drop">
                      <div class="summary-heading flex items-center justify-between">
                        {% if block.settings.title != blank and blog.all_tags != blank %}
                          <h3 class="mb-0 font-medium">{{ block.settings.title }}</h3>
                        {% endif %}
                        <span class="icon-toggle relative"></span>
                      </div>
                    </summary>
                    <div id="sb-tag-drop" class="parent-display content-animation facets__display-vertical tags-list">

                      {%- for tag in blog.all_tags -%}
                        <div class="tags-item inline-block mb-10 mr-10">{{ tag | link_to_tag: tag }}</div>
                      {%- endfor -%}

                    </div>
                  </details>
                </div>
              {% endif %}
            {% when 'popular_post' %}
              {% liquid
                assign pa_title = block.settings.title 
                assign pa_blog_handle = block.settings.sidebar_recent_blog_name 
                assign pa_sort_order = block.settings.sort_order
                assign pa_products_per_page = block.settings.products_per_page | plus: 1 | default: 3

                case pa_sort_order 
                  when "published_at_desc" 
                    assign pa_sorted_articles = blogs[pa_blog_handle].articles | sort: 'published_at' | reverse 
                  when "published_at_asc" 
                    assign pa_sorted_articles = blogs[pa_blog_handle].articles | sort: 'published_at' 
                  else 
                    assign pa_sorted_articles = blogs[pa_blog_handle].articles 
                endcase

                assign pa_limited_articles = pa_sorted_articles | slice: 0, pa_products_per_page
                %}
              <div class="popular-articles">

                <details
                  id="popular-articles"
                  class=""
                  data-index="1"
                  style=""
                  open="">
                  <summary
                    class="facets__summary mb-0 pb-24 caption-large focus-offset"
                    role="button"
                    aria-expanded="false"
                    aria-controls="popular-articles">
                    <div class="summary-heading flex items-center justify-between">
                      {% if pa_title != blank %}
                        <h3 class="mb-0 font-medium">{{ pa_title }}</h3>
                      {% endif %}
                      <span class="icon-toggle relative"></span>
                    </div>
                  </summary>
                  <div id="popular-articles" class="parent-display content-animation facets__display-vertical">
                    <ul>
                      {% for pa_article in pa_limited_articles %}

                        {% unless pa_article.id == article.id %}
                          <li class="pa-item">
                            <div class="pa-item__image mb-15 rounded-lg overflow-hidden">
                              <img
                                class="w-full"
                                src="{{ pa_article.image.src | img_url: '330x' }}"
                                alt="{{ pa_article.title }}">
                            </div>
                            <div class="info-container mb-10 flex-row flex flex-wrap items-center justify-center text-sm color-other">
                              {%- if gst.post_show_author -%}
                                <div class="info-text pr-10">
                                  {{ 'blogs.article.by' | t }}
                                  <span class="info-text__author">
                                    {{- article.author -}}
                                  </span>
                                </div>
                              {% endif %}

                              {%- if gst.post_show_date -%}
                                <div class="update px-10">
                                  <span class="mr-5">Updated:</span>
                                  {{- article.updated_at | time_tag: format: 'date' -}}
                                </div>
                              {% endif %}
                            </div>
                            <h4 class="font-medium mb-0 text-center">
                              <a href="{{ pa_article.url }}" title="{{ pa_article.name }}">{{ pa_article.title }}</a>
                            </h4>
                          </li>
                        {% endunless %}

                      {% endfor %}
                    </ul>
                  </div>
                </details>
              </div>

          {%- endcase -%}
        {%- endfor -%}
      </div>
      <div class="article__right md:w-3/4 w-full mb-30 md:mb-0 {% if sst.sid_pos == "left" %}md:pl-30 pl-0{% else %}md:pr-30 pr-0{% endif %}">
        {%- for block in section.blocks -%}
          {% if block.type == 'featured_image' %}
            {%- if article.image -%}
              <div class="article-template__hero-container mb-40{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}" {{ block.shopify_attributes }}>
                <div
                  class="article-template__hero-{{ block.settings.image_height }} bd-radius media relative"
                  itemprop="image"
                  {% if block.settings.image_height == 'adapt' and article.image %}
                  style="padding-bottom: {{ 1 | divided_by: article.image.aspect_ratio | times: 100 }}%;"
                  {% endif %}>
                  <img
                    srcset="
                                                  {% if article.image.width >= 350 %}{{ article.image | image_url: width: 350 }} 350w,{% endif %}
                                                  {% if article.image.width >= 750 %}{{ article.image | image_url: width: 750 }} 750w,{% endif %}
                                                  {% if article.image.width >= 1100 %}{{ article.image | image_url: width: 1100 }} 1100w,{% endif %}
                                                  {% if article.image.width >= 1500 %}{{ article.image | image_url: width: 1500 }} 1500w,{% endif %}
                                                  {% if article.image.width >= 2200 %}{{ article.image | image_url: width: 2200 }} 2200w,{% endif %}
                                                  {% if article.image.width >= 3000 %}{{ article.image | image_url: width: 3000 }} 3000w,{% endif %}
                                                  {{ article.image | image_url }} {{ article.image.width }}w
                                                "
                    sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 }}px, (min-width: 750px) calc(100vw - 10rem), 100vw"
                    src="{{ article.image | image_url: width: 1100 }}"
                    loading="eager"
                    fetchpriority="high"
                    width="{{ article.image.width }}"
                    height="{{ article.image.height }}"
                    alt="{{ article.image.alt | escape }}"
                    class="block max-w-full absolute top-0 left-0 h-full w-full">
                </div>
              </div>
            {%- endif -%}
          {% endif %}
        {%- endfor -%}
        <div class="article-template__wrapper  mb-30">
          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when '@app' -%}
                <div class="page-width page-width--narrow">
                  {% render block %}
                </div>
              {%- when 'author_and_date' -%}
                <div class="info-container mb-15 flex-row flex flex-wrap items-center justify-start text-sm color-other">
                {%- if gst.post_show_author -%}
                  <div class="info-text pr-10">
                    {{ 'blogs.article.by' | t }}
                    <span class="info-text__author">
                      {{- article.author -}}
                    </span>
                  </div>
                {% endif %}

                {%- if gst.post_show_date -%}
                  <div class="update px-10">
                    <span class="mr-5">Updated:</span>
                    {{- article.updated_at | time_tag: format: 'date' -}}
                  </div>
                {% endif %}
              </div>
              {%- when 'title' -%}
                <header class="page-width page-width--narrow{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}" {{ block.shopify_attributes }}>
                  <h1 class="article-template__title" itemprop="headline">
                    {{ article.title | escape }}
                  </h1>

                </header>
              {%- when 'content' -%}
                <div
                  class="article-template__content mb-30 pb-30 rte{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                  itemprop="articleBody"
                  {{ block.shopify_attributes }}>
                  {{ article.content }}
                </div>
              {%- when 'nextprev' -%}
                {%- if blog.previous_article != null or blog.next_article != null -%}
                  <div class="article__pagination flex flex-row justify-between items-center mb-30 pb-30 gap-30">
                    <div class="article__pagination--item article__pagination--prev">
                      {%- if blog.previous_article -%}
                        <a class="button--prev mb-15 inline-block" href="{{ blog.previous_article.url }}">
                          <span class="text flex flex-row items-center justify-start">
                            <span class="icon mr-10">
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 20 20"
                                fill="none">
                                <path d="M17.5 9.3125H4.15625L9.46875 3.90625C9.75 3.625 9.75 3.1875 9.46875 2.90625C9.1875 2.625 8.75 2.625 8.46875 2.90625L2 9.46875C1.71875 9.75 1.71875 10.1875 2 10.4688L8.46875 17.0312C8.59375 17.1562 8.78125 17.25 8.96875 17.25C9.15625 17.25 9.3125 17.1875 9.46875 17.0625C9.75 16.7812 9.75 16.3438 9.46875 16.0625L4.1875 10.7188H17.5C17.875 10.7188 18.1875 10.4062 18.1875 10.0312C18.1875 9.625 17.875 9.3125 17.5 9.3125Z" fill="#A3AEB9" />
                              </svg>
                            </span>
                            Prev articles
                          </span>
                        </a>
                        <h5>
                          <a href="{{ blog.previous_article.url }}">{{ blog.previous_article.title }}</a>
                        </h5>
                      {%- endif -%}
                    </div>
                    <div class="article__pagination--item article__pagination--next">
                      {%- if blog.next_article -%}
                        <a class="button--next inline-block mb-15" href="{{ blog.next_article.url }}">
                          <span class="text flex flex-row items-center justify-start">
                            Next articles
                            <span class="icon ml-10">
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 20 20"
                                fill="none">
                                <path d="M18 9.5L11.5312 2.9375C11.25 2.65625 10.8125 2.65625 10.5312 2.9375C10.25 3.21875 10.25 3.65625 10.5312 3.9375L15.7812 9.28125H2.5C2.125 9.28125 1.8125 9.59375 1.8125 9.96875C1.8125 10.3438 2.125 10.6875 2.5 10.6875H15.8437L10.5312 16.0938C10.25 16.375 10.25 16.8125 10.5312 17.0938C10.6562 17.2188 10.8437 17.2812 11.0312 17.2812C11.2187 17.2812 11.4062 17.2188 11.5312 17.0625L18 10.5C18.2812 10.2187 18.2812 9.78125 18 9.5Z" fill="#A3AEB9" />
                              </svg>
                            </span>
                          </span>
                        </a>
                        <h5>
                          <a href="{{ blog.next_article.url }}">{{ blog.next_article.title }}</a>
                        </h5>
                      {%- endif -%}
                    </div>
                  </div>
                {%- endif -%}
              {%- when 'tags' -%}
                {% if article.tags != blank and article.tags.size > 0 %}
                  <div class="article-tag mb-30 pb-30">
                    <div class="article-tag-row items-center flex flex-row">
                      <ul class="tag-list list-none flex flex-row flex-wrap items-center justify-start">
                        {% for tag in article.tags %}
                          <li class="item {% unless forloop.first %}ml-10{% endunless %} mb-10">
                            {{ tag | link_to_tag: tag }}
                          </li>
                        {% endfor %}
                      </ul>
                    </div>
                  </div>
                {% endif %}
              {%- when 'share' -%}
                <script src="{{ 'blog-detail.js' | asset_url }}" defer="defer"></script>
                <div class="article-detail__share mb-40">
                  <div class="share-container">
                    <div class="social-icons-container social-icon flex flex-row flex-wrap items-center justify-start">
                      <div class="share-text mr-20">
                        Share:
                      </div>

                      <a
                        class="btn-sharing btnFacebook bls_tooltip d-inline-flex mr-10"
                        href="javascript:void(0);"
                        data-social='https://www.facebook.com/sharer/sharer.php?u={{ canonical_url }}&p[images][0]={{ article.image | image_url: width: 480, height: 480 }}", "sharer", "toolbar=0,status=0,width=660,height=445'>
                        {% render 'icon'
                          , icon_name: 'icon-facebook' %}
                      </a>
                      <a
                        class="btn-sharing btnTwitter bls_tooltip d-inline-flex mr-10"
                        href="javascript:void(0);"
                        data-social='https://twitter.com/intent/tweet?text={{ article.title | truncate: 30 | url_param_escape }} {{ canonical_url }}", "sharertwt", "toolbar=0,status=0,width=640,height=445'>
                        {% render 'icon'
                          , icon_name: 'icon-twitter' %}
                      </a>
                      <a
                        class="btn-sharing btnPinterest bls_tooltip d-inline-flex"
                        href="javascript:void(0);"
                        data-social='http://pinterest.com/pin/create/button/?url={{ canonical_url }}&amp;media={{ article.image | image_url: width: 480, height: 480 }}", "sharerpinterest", "toolbar=0,status=0,width=660,height=445'>
                        {% render 'icon'
                          , icon_name: 'icon-pinterest' %}
                      </a>
                    </div>
                  </div>
                </div>
              {%- when 'topblog' -%}
                <div class="article-detail__tob tob top-our-blog mb-40">
                  <h3 class="font-medium">{{ block.settings.otp_heading }}</h3>
                  <div class="tob__content">
                    {% if block.settings.otp1_article != blank %}
                      <div class="tob__item tob__item1 mb-15">
                        <h5>{{ block.settings.otp1_title }}</h5>
                        <a href="{{ block.settings.otp1_article.url }}" title="{{ block.settings.otp1_article.title }}">{{ block.settings.otp1_article.title }}</a>
                      </div>
                    {% endif %}
                    {% if block.settings.otp2_article != blank %}
                      <div class="tob__item tob__item2 mb-15">
                        <h5>{{ block.settings.otp2_title }}</h5>
                        <a href="{{ block.settings.otp2_article.url }}" title="{{ block.settings.otp2_article.title }}">{{ block.settings.otp2_article.title }}</a>
                      </div>
                    {% endif %}
                    {% if block.settings.otp3_article != blank %}
                      <div class="tob__item tob__item3 mb-15">
                        <h5>{{ block.settings.otp3_title }}</h5>
                        <a href="{{ block.settings.otp3_article.url }}" title="{{ block.settings.otp3_article.title }}">{{ block.settings.otp3_article.title }}</a>
                      </div>
                    {% endif %}
                    {% if block.settings.otp4_article != blank %}
                      <div class="tob__item tob__item4 mb-15">
                        <h5>{{ block.settings.otp4_title }}</h5>
                        <a href="{{ block.settings.otp4_article.url }}" title="{{ block.settings.otp4_article.title }}">{{ block.settings.otp4_article.title }}</a>
                      </div>
                    {% endif %}

                    {% if block.settings.otp5_article != blank %}
                      <div class="tob__item tob__item5">
                        <h5>{{ block.settings.otp5_title }}</h5>
                        <a href="{{ block.settings.otp5_article.url }}" title="{{ block.settings.otp5_article.title }}">{{ block.settings.otp5_article.title }}</a>
                      </div>
                    {% endif %}
                  </div>
                </div>
              {% when 'excerpt' %}
                <div class="excerpt article-detail__excerpt mb-30">
                  {{ article.excerpt }}
                </div>
            {%- endcase -%}
          {%- endfor -%}
        </div>
        {%- if blog.comments_enabled? -%}
          <div class="article-template__comment-wrapper background-secondary">
            <div id="comments" class="page-width page-width--narrow{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
              {%- if article.comments_count > 0 -%}
                {%- assign anchorId = '#Comments-' | append: article.id -%}

                <h2 id="Comments-{{ article.id }}" tabindex="-1">
                  {{ 'blogs.article.comments' | t: count: article.comments_count }}
                </h2>
                {% paginate article.comments by 5 %}
                  <div class="article-template__comments">
                    {%- if comment.status == 'pending' and comment.content -%}
                      <article id="{{ comment.id }}" class="article-template__comments-comment">
                        {{ comment.content }}
                        <footer class="right">
                          <span class="circle-divider caption-with-letter-spacing">{{ comment.author }}</span>
                        </footer>
                      </article>
                    {%- endif -%}

                    {%- for comment in article.comments -%}
                      <article id="{{ comment.id }}" class="article-template__comments-comment">
                        {{ comment.content }}
                        <footer class="right">
                          <span class="circle-divider caption-with-letter-spacing">{{ comment.author }}</span>
                          <span class="caption-with-letter-spacing">
                            {{- comment.created_at | time_tag: format: 'date' -}}
                          </span>
                        </footer>
                      </article>
                    {%- endfor -%}
                    {% render 'pagination'
                      , paginate: paginate
                      , anchor: anchorId %}
                  </div>
                {% endpaginate %}
              {%- endif -%}
              {% form 'new_comment'
                , article %}
                {%- liquid
                  assign post_message = 'blogs.article.success'
                  if blog.moderated? and comment.status == 'unapproved'
                    assign post_message = 'blogs.article.success_moderated'
                  endif
                -%}
                <h2>{{ 'blogs.article.comment_form_title' | t }}</h2>
                {%- if form.errors -%}
                  <div class="tp-form-message--error">
                    <div class="form__message" role="alert">
                      <h3
                        class="form-status caption-large text-body"
                        tabindex="-1"
                        autofocus>
                        {% render 'icon'
                          , icon_name: 'icon-error' %}
                        {{ 'templates.contact.form.error_heading' | t }}
                      </h3>
                    </div>
                    <ul class="form-status-list caption-large">
                      {%- for field in form.errors -%}
                        <li>
                          <a href="#CommentForm-{{ field }}" class="link">
                            {%- if form.errors.translated_fields[field] contains 'author' -%}
                              {{ 'blogs.article.name' | t }}
                            {%- elsif form.errors.translated_fields[field] contains 'body' -%}
                              {{ 'blogs.article.message' | t }}
                            {%- else -%}
                              {{ form.errors.translated_fields[field] }}
                            {%- endif -%}
                            {{ form.errors.messages[field] }}
                          </a>
                        </li>
                      {%- endfor -%}
                    </ul>
                  </div>
                  
                {%- elsif form.posted_successfully? -%}
                  <div class="form-status-list form__message" role="status">
                    <h3
                      class="form-status"
                      tabindex="-1"
                      autofocus>
                      {% render 'icon'
                        , icon_name: 'icon-success' %}
                      {{ post_message | t }}
                    </h3>
                  </div>
                {%- endif -%}

                <div
                  {% if blog.moderated? == false %}
                  class="article-template__comments-fields mb-30"
                  {% endif %}>
                  <div class="article-template__comment-fields">
                    <div class="field field--with-error flex flex-col">
                      <label class="field__label mb-5" for="CommentForm-author">
                        {{- 'blogs.article.name' | t }}
                        <span aria-hidden="true">*</span>
                      </label>
                      <input
                        type="text"
                        name="comment[author]"
                        id="CommentForm-author"
                        class="field__input"
                        autocomplete="name"
                        value="{{ form.author }}"
                        aria-required="true"
                        required
                        {% if form.errors contains 'author' %}
                        aria-invalid="true"
                        aria-describedby="CommentForm-author-error"
                        {% endif %}
                        placeholder="{{ 'blogs.article.name' | t }}">
                      {%- if form.errors contains 'author' -%}
                        <small id="CommentForm-author-error">
                          <span class="form__message">
                            {%- render 'icon'
                              , icon_name: 'icon-error' -%}
                            {{- 'blogs.article.name' | t }}
                            {{ form.errors.messages.author }}.</span>
                        </small>
                      {%- endif -%}
                    </div>
                    <div class="field field--with-error flex flex-col">
                      <label class="field__label mb-5" for="CommentForm-email">
                        {{- 'blogs.article.email' | t }}
                        <span aria-hidden="true">*</span>
                      </label>
                      <input
                        type="email"
                        name="comment[email]"
                        id="CommentForm-email"
                        autocomplete="email"
                        class="field__input"
                        value="{{ form.email }}"
                        autocorrect="off"
                        autocapitalize="off"
                        aria-required="true"
                        required
                        {% if form.errors contains 'email' %}
                        aria-invalid="true"
                        aria-describedby="CommentForm-email-error"
                        {% endif %}
                        placeholder="{{ 'blogs.article.email' | t }}">
                      {%- if form.errors contains 'email' -%}
                        <small id="CommentForm-email-error">
                          <span class="form__message">
                            {%- render 'icon'
                              , icon_name: 'icon-error' -%}
                            {{- 'blogs.article.email' | t }}
                            {{ form.errors.messages.email }}.</span>
                        </small>
                      {%- endif -%}
                    </div>
                  </div>
                  <div class="field field--with-error">
                    <label class="form__label field__label mb-5" for="CommentForm-body">
                      {{- 'blogs.article.message' | t }}
                      <span aria-hidden="true">*</span>
                    </label>
                    <textarea
                      rows="5"
                      name="comment[body]"
                      id="CommentForm-body"
                      class="text-area field__input w-full block"
                      aria-required="true"
                      required
                      {% if form.errors contains 'body' %}
                      aria-invalid="true"
                      aria-describedby="CommentForm-body-error"
                      {% endif %}
                      placeholder="{{ 'blogs.article.message' | t }}">{{ form.body }}</textarea>
                  </div>
                  {%- if form.errors contains 'body' -%}
                    <small id="CommentForm-body-error">
                      <span class="form__message">
                        {%- render 'icon'
                          , icon_name: 'icon-error' -%}
                        {{- 'blogs.article.message' | t }}
                        {{ form.errors.messages.body }}.</span>
                    </small>
                  {%- endif -%}
                </div>
                {%- if blog.moderated? -%}
                  <p class="article-template__comment-warning caption">{{ 'blogs.article.moderated' | t }}</p>
                {%- endif -%}
                <input
                  type="submit"
                  class="tp-btn tp-btn__primary"
                  value="{{ 'blogs.article.post' | t }}">
              {% endform %}
            </div>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</article>
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "articleBody": {{ article.content | strip_html | json }},
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": {{ request.origin | append: page.url | json }}
    },
    "headline": {{ article.title | json }},
    {% if article.excerpt != blank %}
      "description": {{ article.excerpt | strip_html | json }},
      {% endif %}
      {% if article.image %}
        "image" : [{{ article | image_url: width: 1920 | prepend: "https:" | json }}],
        {% endif %}
        "datePublished": {{ article.published_at | date: '%Y-%m-%dT%H:%M:%SZ' | json }},
        "dateCreated": {{ article.created_at | date: '%Y-%m-%dT%H:%M:%SZ' | json }},
        "author": {
          "@type": "Person",
          "name": {{ article.author | json }}
        },
        "publisher": {
          "@type": "Organization",
          "name": {{ shop.name | json }}
        }
      }
</script>

{% schema %}
  {
    "name": "t:sections.main-article.name",
    "tag": "section",
    "class": "section",
    "settings": [
      {
        "type": "header",
        "content": "Content Settings"
      },
      {
        "type": "select",
        "id": "sid_pos",
        "label": "Sidebar Position",
        "options": [
          {
            "value": "left",
            "label": "Sidebar Left"
          }, {
            "value": "right",
            "label": "Sidebar Right"
          }
        ],
        "default": "right"
      },
      {
        "type": "header",
        "content": "t:sections.all.padding.section_padding_heading"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_top",
        "default": 80
      }, {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_bottom",
        "default": 80
      }
    ],
    "blocks": [
      {
        "type": "@app"
      },
      {
        "type": "featured_image",
        "name": "t:sections.main-article.blocks.featured_image.name",
        "limit": 1,
        "settings": [
          {
            "type": "select",
            "id": "image_height",
            "options": [
              {
                "value": "adapt",
                "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__1.label"
              }, {
                "value": "small",
                "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__2.label"
              }, {
                "value": "medium",
                "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__3.label"
              }, {
                "value": "large",
                "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__4.label"
              }
            ],
            "default": "adapt",
            "label": "t:sections.main-article.blocks.featured_image.settings.image_height.label",
            "info": "t:sections.main-article.blocks.featured_image.settings.image_height.info"
          }
        ]
      },
      {
        "type": "title",
        "name": "t:sections.main-article.blocks.title.name",
        "limit": 1
      },
      {
        "type": "author_and_date",
        "name": "Author & Date",
        "limit": 1
      }, {
        "type": "content",
        "name": "t:sections.main-article.blocks.content.name",
        "limit": 1
      }, {
        "type": "share",
        "name": "t:sections.main-article.blocks.share.name",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "share_label",
            "label": "t:sections.main-article.blocks.share.settings.text.label",
            "default": "Share"
          }, {
            "type": "paragraph",
            "content": "t:sections.main-article.blocks.share.settings.featured_image_info.content"
          }, {
            "type": "paragraph",
            "content": "t:sections.main-article.blocks.share.settings.title_info.content"
          }
        ]
      }, {
        "type": "tags",
        "name": "Tags",
        "limit": 1
      }, {
        "type": "nextprev",
        "name": "Next/Prev Article",
        "limit": 1
      }, {
        "type": "topblog",
        "name": "Our top 5 picks",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "otp_heading",
            "label": "Heading",
            "default": "Our top 5 picks"
          },
          {
            "type": "header",
            "content": "Pick 1"
          },
          {
            "type": "text",
            "id": "otp1_title",
            "label": "Title",
            "default": "1. Best Overall:"
          },
          {
            "type": "article",
            "id": "otp1_article",
            "label": "Article"
          }, {
            "type": "header",
            "content": "Pick 2"
          }, {
            "type": "text",
            "id": "otp2_title",
            "label": "Title",
            "default": "2. Best Budget Pick:"
          }, {
            "type": "article",
            "id": "otp2_article",
            "label": "Article"
          }, {
            "type": "header",
            "content": "Pick 3"
          }, {
            "type": "text",
            "id": "otp3_title",
            "label": "Title",
            "default": "3. Best Splurge Pick:"
          }, {
            "type": "article",
            "id": "otp3_article",
            "label": "Article"
          }, {
            "type": "header",
            "content": "Pick 4"
          }, {
            "type": "text",
            "id": "otp4_title",
            "label": "Title",
            "default": "4. Best Fleece:"
          }, {
            "type": "article",
            "id": "otp4_article",
            "label": "Article"
          }, {
            "type": "header",
            "content": "Pick 5"
          }, {
            "type": "text",
            "id": "otp5_title",
            "label": "Title",
            "default": "5. Best For The Outdoors:"
          }, {
            "type": "article",
            "id": "otp5_article",
            "label": "Article"
          }
        ]
      }, {
        "type": "exerpt",
        "name": "Excerpt",
        "limit": 1
      }, {
        "type": "categories",
        "name": "Categories (for sidebar)",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Categories"
          }, {
            "type": "link_list",
            "id": "menu",
            "label": "Select categories menu"
          }
        ]
      }, {
        "type": "recent_post",
        "name": "Recent Post (for sidebar)",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Recent Post"
          }, {
            "type": "blog",
            "id": "sidebar_recent_blog_name",
            "label": "Blog Name"
          }
        ]
      }, {
        "type": "sidebar_tags",
        "name": "Tags (for sidebar)",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Tags"
          }
        ]
      }, {
        "type": "popular_post",
        "name": "Popular articles",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Popular articles"
          }, {
            "type": "blog",
            "id": "sidebar_recent_blog_name",
            "label": "Select the displayed blog."
          }, {
            "type": "select",
            "label": "Sort Order",
            "id": "sort_order",
            "options": [
              {
                "value": "published_at_desc",
                "label": "Newest to Oldest"
              }, {
                "value": "published_at_asc",
                "label": "Oldest to Newest"
              }
            ]
          }, {
            "type": "number",
            "id": "products_per_page",
            "label": "Products per page",
            "default": 3
          }
        ]
      }
    ]
  }
{% endschema %}