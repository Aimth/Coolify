{{ 'product-tab.css' | asset_url | stylesheet_tag }}
<script src="{{ 'product-tab.js' | asset_url }}" defer="defer"></script>
{% liquid
  assign sst = section.settings
  assign container = sst.container
%}
{%- capture style -%}
  --section-padding-top: {{ sst.padding_top }}px; --section-padding-bottom: {{ sst.padding_bottom }}px;
{%- endcapture -%}
{% capture classGrid %}
  tp-grid tp-grid--{{ sst.columns_mobile }}-col-mobile tp-grid--{{ sst.columns_tablets }}-col-tablets tp-grid--{{ sst.columns_desktop }}-col-desktop 
{% endcapture %}
<div class="tp-featured-collection tp-featured-collection-{{ section.id }} color-{{ sst.color_scheme }} gradient section-py section-mb" style="{{ style | strip | strip_newlines }}">
  <div class="{{ container }}">
    <div class="tp-fcl__main tp-fcl__main-{{ section.id }} tp-fcl__tabs">
      {% render 'section-header'
        , sst: sst %}
      <div class="tp-fcl__top {{ sst.layout_button }}">
        <div class="tp-box-button">
          {%- for collection in section.settings.collection_list -%}
            <button class="collection_tablinks h2{% if forloop.first %} active{% endif %}" data-tab-index="{{ forloop.index }}">
              {{ collection.title }}
            </button>
          {% else %}
            {%- for i in (1..3) -%}
              <button class="collection_tablinks h2{% if forloop.first %} active{% endif %}" data-tab-index="{{ forloop.index }}">
                {{ collection.title | default: "Title" }}
              </button>
            {%- endfor -%}
          {%- endfor -%}
        </div>
        <div class="tp-box-select block md:hidden relative">
          <select
            name="tpbox-select"
            id="tpbox-select"
            class="field__input w-full">
            {%- for collection in section.settings.collection_list -%}
              <option
                class="collection_tablinks"
                {% if forloop.first %}
                active
                {% endif -%}
                value="{{ forloop.index }}">
                {{ collection.title }}
              </option>
            {%- endfor -%}
          </select>
          <span class="icon-select">
            {% render 'icon'
              , icon_name: 'dropdown' %}
          </span>
        </div>
        {% if sst.layout_button == 'layout_2' %}
          <a href="/collections" class="flex tp-btn tp-btn__underline n-hvr items-center gap-12">
            {{ 'button.see_more' | t }}
          </a>
        {% endif %}
      </div>
      {%- for collection in section.settings.collection_list -%}
        {% assign collection = collections[collection] %}
        <div class="relative">
          <div class="parent-item-{{ forloop.index }} parent-item  {% if forloop.first %}active{% endif %}">
            <ul class="tp-fcl__content list-none {{ classGrid }}">
              {%- for product in collection.products limit: section.settings.limit_products -%}
                <li class="tp-fcl__item tp-grid__item">
                  {% render 'product-item-layout-1'
                    , card_product: product %}
                </li>
              {%- endfor -%}
            </ul>
            {% if section.settings.text_button != blank %}
              <div class="fcl-load-more text-center mt-30">
                <a href="{{ collection.url | default: '#' }}" class="tp-btn tp-btn__secondary">
                  {{ section.settings.text_button }}
                </a>
              </div>
            {% endif %}
          </div>
        </div>
      {% else %}
        {%- for i in (1..3) -%}
          <div class="relative">
            <div class="parent-item-{{ forloop.index }} parent-item  {% if forloop.first %}active{% endif %}">
              <ul class="tp-fcl__content list-none {{ classGrid }}">
                {%- for i in (1..section.settings.limit_products) -%}
                  <li class="tp-fcl__item tp-grid__item">
                    {% liquid
                      assign diff = 4 | minus: 1
                      assign randomNumber = 'now' | date: '%N' | modulo: diff | plus: 1
                      assign placeholder_image = 'product-apparel-' | append: randomNumber
                      render 'product-item-layout-1', placeholder_image: placeholder_image
                    %}
                  </li>
                {%- endfor -%}
              </ul>
              {% if section.settings.text_button != blank %}
                <div class="fcl-load-more text-center mt-30">
                  <a href="{{ collection.url | default: '#' }}" class="tp-btn tp-btn__secondary">
                    {{ section.settings.text_button }}
                  </a>
                </div>
              {% endif %}
            </div>
          </div>
        {%- endfor -%}
      {% endfor %}
    </div>
  </div>
</div>
{% schema %}
  {
    "name": "Product Tab",
    "tag": "section",
    "class": "section relative",
    "disabled_on": {
      "groups": ["*"]
    },
    "settings": [
      {
        "type": "header",
        "content": "Section header"
      },
      {
        "type": "checkbox",
        "id": "show_heading_header",
        "label": "Show \"Section header\"",
        "default": false
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Title"
      },
      {
        "type": "richtext",
        "id": "description",
        "label": "Description",
        "default": "<p></p>"
      }, {
        "type": "select",
        "id": "text_alignment",
        "label": "Text alignment",
        "default": "text-left",
        "options": [
          {
            "value": "text-left",
            "label": "Left"
          }, {
            "value": "text-center",
            "label": "Center"
          }, {
            "value": "text-right",
            "label": "Right"
          }
        ]
      }, {
        "type": "paragraph",
        "content": "----------------------------------------"
      }, {
        "type": "header",
        "content": "General"
      }, {
        "type": "select",
        "id": "container",
        "label": "Layout",
        "default": "container",
        "options": [
          {
            "value": "container",
            "label": "Default"
          }, {
            "value": "container-fluid",
            "label": "Fluid container"
          }, {
            "value": "full-width",
            "label": "Full width"
          }
        ]
      }, {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "t:sections.all.colors.label",
        "default": "background-1"
      }, {
        "type": "collection_list",
        "id": "collection_list",
        "label": "Collections",
        "limit": 8
      }, {
        "type": "header",
        "content": "Settings button tab"
      }, {
        "type": "select",
        "id": "layout_button",
        "label": "Layout button",
        "default": "layout_1",
        "options": [
          {
            "value": "layout_1",
            "label": "Layout 1"
          }, {
            "value": "layout_2",
            "label": "Layout 2"
          }
        ]
      }, {
        "type": "range",
        "id": "limit_products",
        "label": "Products to show",
        "min": 1,
        "max": 30,
        "step": 1,
        "default": 8
      }, {
        "type": "range",
        "id": "columns_desktop",
        "min": 1,
        "max": 6,
        "step": 1,
        "default": 4,
        "label": "Number of columns on desktop"
      }, {
        "type": "select",
        "id": "columns_tablets",
        "options": [
          {
            "value": "1",
            "label": "1 Columns"
          }, {
            "value": "2",
            "label": "2 Columns"
          }, {
            "value": "3",
            "label": "3 Columns"
          }
        ],
        "default": "3",
        "label": "Number of columns on columns_tablets"
      }, {
        "type": "select",
        "id": "columns_mobile",
        "options": [
          {
            "value": "1",
            "label": "1 Columns"
          }, {
            "value": "2",
            "label": "2 Columns"
          }
        ],
        "default": "2",
        "label": "Number of columns on mobile"
      }, {
        "type": "text",
        "id": "text_button",
        "label": "Text button",
        "default": "View more product"
      }, {
        "type": "header",
        "content": "Section padding"
      }, {
        "type": "range",
        "id": "padding_top",
        "label": "Padding top",
        "default": 0,
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px"
      }, {
        "type": "range",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "default": 0,
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px"
      }
    ],
    "blocks": [],
    "limit": 1,
    "presets": [
      {
        "name": "Product Tab"
      }
    ]
  }
{% endschema %}