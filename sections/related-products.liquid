{% liquid
  assign sst = section.settings
  assign container = sst.container
  assign loop = sst.loop
  assign autoplay = sst.autoplay
  assign show_heading_header = sst.show_heading_header
  assign heading = sst.heading
%}
{%- capture style -%}
  --section-padding-top: {{ sst.padding_top }}px; --section-padding-bottom: {{ sst.padding_bottom }}px;
{%- endcapture -%}
<div class="tp-prd-recom color-{{ sst.color_scheme }} gradient section-py section-mb" style="{{ style | strip | strip_newlines }}">
  <div class="{{ container }}">
    <product-recommendations class="related-products" data-url="{{ routes.product_recommendations_url }}?section_id={{ section.id }}&product_id={{ product.id }}&limit={{ section.settings.products_to_show }}">
      {% if recommendations.performed and recommendations.products_count > 0 %}
        {%- if show_heading_header -%}
          {%- if heading != blank or sst.description != blank -%}
            <div class="tp-section-header mb-40">
              {% if heading != blank %}
                <div class="flex items-center justify-between flex-wrap mb-20 ">
                  {%- if heading != blank -%}
                    <h2 class="tp-section-heading mb-0">
                      {{ heading }}
                    </h2>
                  {%- endif -%}
                  <div class="flex items-center gap-20">
                    <div class="flex items-center gap-10">
                      <div class="swiper-navigation shadow swiper-prev-prd-recom swiper-button-prev">
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="21"
                                viewBox="0 0 20 21"
                                fill="none">
                          <path d="M17.5 9.66895H4.15625L9.46875 4.2627C9.75 3.98145 9.75 3.54395 9.46875 3.2627C9.1875 2.98145 8.75 2.98145 8.46875 3.2627L2 9.8252C1.71875 10.1064 1.71875 10.5439 2 10.8252L8.46875 17.3877C8.59375 17.5127 8.78125 17.6064 8.96875 17.6064C9.15625 17.6064 9.3125 17.5439 9.46875 17.4189C9.75 17.1377 9.75 16.7002 9.46875 16.4189L4.1875 11.0752H17.5C17.875 11.0752 18.1875 10.7627 18.1875 10.3877C18.1875 9.98144 17.875 9.66895 17.5 9.66895Z" fill="#A3AEB9"/>
                        </svg>
                      </div>
                      <div class="swiper-navigation shadow swiper-next-prd-recom swiper-button-next">
                        <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="21"
                                viewBox="0 0 20 21"
                                fill="none">
                          <path d="M18 9.85645L11.5312 3.29395C11.25 3.0127 10.8125 3.0127 10.5312 3.29395C10.25 3.5752 10.25 4.0127 10.5312 4.29395L15.7812 9.6377H2.5C2.125 9.6377 1.8125 9.95019 1.8125 10.3252C1.8125 10.7002 2.125 11.0439 2.5 11.0439H15.8437L10.5312 16.4502C10.25 16.7314 10.25 17.1689 10.5312 17.4502C10.6562 17.5752 10.8437 17.6377 11.0312 17.6377C11.2187 17.6377 11.4062 17.5752 11.5312 17.4189L18 10.8564C18.2812 10.5752 18.2812 10.1377 18 9.85645Z" fill="#A3AEB9"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
              {% endif %}
              {% if sst.description != blank %}
                <div class="flex items-center justify-between flex-wrap mb-20 ">
                  {{ sst.description }}
                </div>
              {% endif %}
            </div>
          {%- endif -%}
        {%- endif -%}
        <div
          class="swiper js-tp-prd-recom hover__show-nav"
          data-autoplay="{{ autoplay }}"
          data-loop="{{ loop }}"
          data-mobile="2"
          data-tablet="3"
          data-desktop="{{ sst.sliders_perview }}"
          data-space-between="{{ settings.spacing_grid_horizontal }}">
          <div class="swiper-wrapper">
            {% for recommendation in recommendations.products %}
              <div class="grid__item swiper-slide">
                {% render 'product-item-layout-1'
                  , card_product: recommendation %}
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </product-recommendations>
  </div>
</div>

{% schema %}
  {
    "name": "t:sections.related-products.name",
    "tag": "section",
    "class": "section",
    "settings": [
      {
        "type": "paragraph",
        "content": "t:sections.related-products.settings.paragraph__1.content"
      },
      {
        "type": "header",
        "content": "Section header"
      },
      {
        "type": "checkbox",
        "id": "show_heading_header",
        "label": "Show \"Section header\"",
        "default": false
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "You May Also Like"
      }, {
        "type": "richtext",
        "id": "description",
        "label": "Description",
        "default": "<p></p>"
      }, {
        "type": "select",
        "id": "text_alignment",
        "label": "Text alignment",
        "default": "text-left",
        "options": [
          {
            "value": "text-left",
            "label": "Left"
          }, {
            "value": "text-center",
            "label": "Center"
          }, {
            "value": "text-right",
            "label": "Right"
          }
        ]
      }, {
        "type": "paragraph",
        "content": "----------------------------------------"
      }, {
        "type": "header",
        "content": "General"
      }, {
        "type": "select",
        "id": "container",
        "label": "Layout",
        "default": "container",
        "options": [
          {
            "value": "container",
            "label": "Default"
          }, {
            "value": "container-fluid",
            "label": "Fluid container"
          }, {
            "value": "full-width",
            "label": "Full width"
          }
        ]
      }, {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "t:sections.all.colors.label",
        "default": "background-1"
      }, {
        "type": "range",
        "id": "products_to_show",
        "min": 2,
        "max": 10,
        "step": 1,
        "default": 4,
        "label": "t:sections.related-products.settings.products_to_show.label"
      }, {
        "type": "select",
        "id": "sliders_perview",
        "label": "Sliders perview (desktop)",
        "options": [
          {
            "value": "3",
            "label": "3"
          }, {
            "value": "4",
            "label": "4"
          }, {
            "value": "5",
            "label": "5"
          }, {
            "value": "6",
            "label": "6"
          }
        ],
        "default": "4"
      }, {
        "type": "range",
        "id": "column_gap",
        "label": "Products gap",
        "min": 0,
        "max": 50,
        "step": 5,
        "unit": "px",
        "default": 30
      }, {
        "type": "header",
        "content": "Slider settings"
      }, {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Autoplay",
        "default": false
      }, {
        "type": "checkbox",
        "id": "loop",
        "label": "Loop",
        "default": false
      }, {
        "type": "header",
        "content": "Section padding"
      }, {
        "type": "range",
        "id": "padding_top",
        "label": "Padding top",
        "default": 0,
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px"
      }, {
        "type": "range",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "default": 0,
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px"
      }
    ]
  }
{% endschema %}