(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:String(r)}function n(t,r,n){return r=a(r),function(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}(t,c()?Reflect.construct(r,n||[],a(t).constructor):r.apply(t,n))}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var t="function"==typeof Map?new Map:void 0;return i=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(c())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&u(o,r.prototype),o}(e,arguments,a(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},i(e)}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var s=function(e){function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=n(this,r)).addEventListener("keyup",(function(t){return"Escape"===t.code&&e.close()})),e.querySelector("#CartDrawer-Overlay").addEventListener("click",e.close.bind(o(e))),e.setHeaderCartIconAccessibility(),e}var i,c,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(r,e),i=r,c=[{key:"setHeaderCartIconAccessibility",value:function(){var e=this,t=document.querySelectorAll(".cart-icon-bubble");0!=t.length&&t.forEach((function(t){t.setAttribute("role","button"),t.setAttribute("aria-haspopup","dialog"),t.addEventListener("click",(function(r){r.preventDefault(),e.open(t)})),t.addEventListener("keydown",(function(r){"SPACE"===r.code.toUpperCase()&&(r.preventDefault(),e.open(t))}))}))}},{key:"open",value:function(e){var t=this;e&&this.setActiveElement(e);var r=this.querySelector('[id^="Details-"] summary');r&&!r.hasAttribute("role")&&this.setSummaryAccessibility(r),setTimeout((function(){t.classList.add("animate","active")})),this.addEventListener("transitionend",(function(){var e=t.classList.contains("is-empty")?t.querySelector(".drawer__inner-empty"):document.getElementById("CartDrawer"),r=t.querySelector(".drawer__inner")||t.querySelector(".drawer__close");window.trapFocus(e,r)}),{once:!0}),document.querySelector(".tp-close-overlay").classList.add("is-visible-cart-drawer"),document.querySelector("html").classList.add("tp-over-flow-hidden-cartdrawer")}},{key:"close",value:function(){this.classList.remove("active"),window.removeTrapFocus(this.activeElement),document.querySelector(".tp-close-overlay").classList.remove("is-visible-cart-drawer"),document.querySelector("html").classList.remove("tp-over-flow-hidden-cartdrawer")}},{key:"setSummaryAccessibility",value:function(e){e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),e.nextElementSibling.getAttribute("id")&&e.setAttribute("aria-controls",e.nextElementSibling.id),e.addEventListener("click",(function(e){e.currentTarget.setAttribute("aria-expanded",!e.currentTarget.closest("details").hasAttribute("open"))})),e.parentElement.addEventListener("keyup",onKeyUpEscape)}},{key:"renderContents",value:function(e){var t=this;this.querySelector(".drawer__inner").classList.contains("is-empty")&&this.querySelector(".drawer__inner").classList.remove("is-empty"),this.productId=e.id,this.getSectionsToRender().forEach((function(r){(r.selector?document.querySelector(r.selector):document.getElementById(r.id)).innerHTML=t.getSectionInnerHTML(e.sections[r.id],r.selector)})),setTimeout((function(){t.querySelector("#CartDrawer-Overlay").addEventListener("click",t.close.bind(t)),t.open()}))}},{key:"getSectionInnerHTML",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".shopify-section";return(new DOMParser).parseFromString(e,"text/html").querySelector(t).innerHTML}},{key:"getSectionsToRender",value:function(){return[{id:"cart-drawer",selector:"#CartDrawer"},{id:"cart-icon-bubble"}]}},{key:"getSectionDOM",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".shopify-section";return(new DOMParser).parseFromString(e,"text/html").querySelector(t)}},{key:"setActiveElement",value:function(e){this.activeElement=e}}],c&&t(i.prototype,c),a&&t(i,a),Object.defineProperty(i,"prototype",{writable:!1}),r}(i(HTMLElement));customElements.define("cart-drawer",s)})();